"""
https://stepik.org/lesson/798678/step/21?unit=801641

–ö–ª–∞—Å—Å FieldTrackerüå∂Ô∏èüå∂Ô∏è
–†–µ–∞–ª–∏–∑—É–π—Ç–µ –∫–ª–∞—Å—Å FieldTracker, –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ –ø–æ–ª—É—á–∞—é—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –∞—Ç—Ä–∏–±—É—Ç–æ–≤ —Å–≤–æ–∏—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –∫–ª–∞—Å—Å–∞. –î–æ—á–µ—Ä–Ω–∏–µ –∫–ª–∞—Å—Å—ã –¥–æ–ª–∂–Ω—ã –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å —á–µ—Ç—ã—Ä–µ –º–µ—Ç–æ–¥–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞:

base() ‚Äî –º–µ—Ç–æ–¥, –ø—Ä–∏–Ω–∏–º–∞—é—â–∏–π –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –∏–º—è –∞—Ç—Ä–∏–±—É—Ç–∞ –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–π –ª–∏–±–æ —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —ç—Ç–æ–≥–æ –∞—Ç—Ä–∏–±—É—Ç–∞, –ª–∏–±–æ –∏—Å—Ö–æ–¥–Ω–æ–µ (—É–∫–∞–∑–∞–Ω–Ω–æ–µ –ø—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏) –∑–Ω–∞—á–µ–Ω–∏–µ —ç—Ç–æ–≥–æ –∞—Ç—Ä–∏–±—É—Ç–∞, –µ—Å–ª–∏ –æ–Ω–æ –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–æ
has_changed() ‚Äî –º–µ—Ç–æ–¥, –ø—Ä–∏–Ω–∏–º–∞—é—â–∏–π –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –∏–º—è –∞—Ç—Ä–∏–±—É—Ç–∞ –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–π True, –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ —ç—Ç–æ–≥–æ –∞—Ç—Ä–∏–±—É—Ç–∞ –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–æ —Ö–æ—Ç—è –±—ã —Ä–∞–∑, –∏–ª–∏ False –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ
changed() ‚Äî –º–µ—Ç–æ–¥, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–π —Å–ª–æ–≤–∞—Ä—å, –≤ –∫–æ—Ç–æ—Ä–æ–º –∫–ª—é—á–∞–º–∏ —è–≤–ª—è—é—Ç—Å—è –∏–º–µ–Ω–∞ –∞—Ç—Ä–∏–±—É—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –∏–∑–º–µ–Ω—è–ª–∏ —Å–≤–æ–∏ –∑–Ω–∞—á–µ–Ω–∏—è, –∞ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ ‚Äî –∏—Ö –∏—Å—Ö–æ–¥–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
save() ‚Äî –º–µ—Ç–æ–¥, —Å–±—Ä–∞—Å—ã–≤–∞—é—â–∏–π –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ. –ü–æ—Å–ª–µ –≤—ã–∑–æ–≤–∞ –º–µ—Ç–æ–¥–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è, —á—Ç–æ –≤—Å–µ –∞—Ç—Ä–∏–±—É—Ç—ã —Ä–∞–Ω–µ–µ –Ω–µ –∏–∑–º–µ–Ω—è–ª–∏ —Å–≤–æ–∏ –∑–Ω–∞—á–µ–Ω–∏—è, –∞ –∏—Ö —Ç–µ–∫—É—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è —Å—á–∏—Ç–∞—é—Ç—Å—è –∏—Å—Ö–æ–¥–Ω—ã–º–∏
–ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è, —á—Ç–æ –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∏ –∫–ª–∞—Å—Å–∞ FieldTracker:

–≤—Å–µ–≥–¥–∞ –∏–º–µ—é—Ç –∞—Ç—Ä–∏–±—É—Ç –∫–ª–∞—Å—Å–∞ fields, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –∫–æ—Ä—Ç–µ–∂ —Å –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å
–≤ —Å–≤–æ–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ç–æ—Ä–µ –≤—Å–µ–≥–¥–∞ –≤—ã–∑—ã–≤–∞—é—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ç–æ—Ä –∫–ª–∞—Å—Å–∞ FieldTracker –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–µ—Ä–≤–∏—á–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–º –∞—Ç—Ä–∏–±—É—Ç–∞–º
–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ 1. –ë—É–¥–µ–º —Å—á–∏—Ç–∞—Ç—å, —á—Ç–æ –∞—Ç—Ä–∏–±—É—Ç –∏–∑–º–µ–Ω—è–µ—Ç —Å–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –≤ —Ç–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ.
"""

class FieldTracker:

    def __init__(self):
        self.changed_dict = {}

    def __setattr__(self, key, value):
        if key in self.__dict__ and key not in self.changed_dict:
            self.changed_dict[key] = self.__dict__[key]
        self.__dict__[key] = value

    def base(self, arg):
        if self.has_changed(arg):
            return self.changed_dict[arg]
        return self.__dict__[arg]

    def has_changed(self, arg):
        return arg in self.changed_dict

    def changed(self):
        return self.changed_dict

    def save(self):
        self.changed_dict = {}


